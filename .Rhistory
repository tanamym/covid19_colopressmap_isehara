shiny::runApp()
runApp()
runApp()
runApp()
yoko<-
# read.csv("https://square.umin.ac.jp/kenkono/csv/ward-new.csv", encoding = "UTF-8", header = F)
fread("https://square.umin.ac.jp/kenkono/csv/ward-new.csv", header = F)
yoko2<-
yoko%>%
filter(V1!="",V1!="区名")%>%
tidyr::pivot_longer(-V1,
names_to = "V",
values_to="count")%>%
rename("name"="V1")
yoko3<-
yoko%>%
filter(V1=="")%>%
tidyr::pivot_longer(-V1,
names_to="V",
values_to="year")%>%
select(-V1)
yoko4<-
yoko%>%
filter(V1=="区名")%>%
tidyr::pivot_longer(-V1,
names_to="V",
values_to="date")%>%
select(-V1)
data<-
left_join(yoko3,yoko4)%>%
left_join(yoko2)%>%
filter(!name%in%c("日本","横浜市","市外","調査中","神奈川県"))%>%
rename("N03_004"="name")%>%
mutate(count=as.numeric(count))%>%
#filter(date=="4/16~4/22")%>%
mutate(N03_003="横浜市")%>%
mutate(start=str_replace(date,"~.+",""),
end=str_replace(date,".*~",""))%>%
mutate(end=str_replace(end," .+",""))%>%
mutate(year2=str_replace(year,"年",""))%>%
# mutate(start=as.Date(paste0(year2,"/",start))) %>%
# mutate(end=as.Date(paste0(year2,"/",end))) %>%
mutate(start=str_replace(start,"/","-"),
end=str_replace(end,"/","-"),
start=paste0(year2,"-",start),
end=paste0(year2,"-",end),
start=lubridate::ymd(start),
end=lubridate::ymd(end))
View(data)
yoko<-
# read.csv("https://square.umin.ac.jp/kenkono/csv/ward-new.csv", encoding = "UTF-8", header = F)
fread("https://square.umin.ac.jp/kenkono/csv/ward-new.csv", encoding = "UTF-8",header = F)
yoko2<-
yoko%>%
filter(V1!="",V1!="区名")%>%
tidyr::pivot_longer(-V1,
names_to = "V",
values_to="count")%>%
rename("name"="V1")
yoko3<-
yoko%>%
filter(V1=="")%>%
tidyr::pivot_longer(-V1,
names_to="V",
values_to="year")%>%
select(-V1)
yoko4<-
yoko%>%
filter(V1=="区名")%>%
tidyr::pivot_longer(-V1,
names_to="V",
values_to="date")%>%
select(-V1)
data<-
left_join(yoko3,yoko4)%>%
left_join(yoko2)%>%
filter(!name%in%c("日本","横浜市","市外","調査中","神奈川県"))%>%
rename("N03_004"="name")%>%
mutate(count=as.numeric(count))%>%
#filter(date=="4/16~4/22")%>%
mutate(N03_003="横浜市")%>%
mutate(start=str_replace(date,"~.+",""),
end=str_replace(date,".*~",""))%>%
mutate(end=str_replace(end," .+",""))%>%
mutate(year2=str_replace(year,"年",""))%>%
# mutate(start=as.Date(paste0(year2,"/",start))) %>%
# mutate(end=as.Date(paste0(year2,"/",end))) %>%
mutate(start=str_replace(start,"/","-"),
end=str_replace(end,"/","-"),
start=paste0(year2,"-",start),
end=paste0(year2,"-",end),
start=lubridate::ymd(start),
end=lubridate::ymd(end))
shiny::runApp()
runApp()
data7<-
# read.csv("https://raw.githubusercontent.com/tanamym/covid19_colopressmap_isehara/main/coviddata.csv",fileEncoding = "sJIS")%>%
fread("https://raw.githubusercontent.com/tanamym/covid19_colopressmap_isehara/main/coviddata.csv")%>%
mutate(Fixed_Date=as.Date(Fixed_Date))%>%
filter(!is.na(X))
View(data7)
data7<-
# read.csv("https://raw.githubusercontent.com/tanamym/covid19_colopressmap_isehara/main/coviddata.csv",fileEncoding = "sJIS")%>%
fread("https://raw.githubusercontent.com/tanamym/covid19_colopressmap_isehara/main/coviddata.csv",encoding = "UTF-8")%>%
mutate(Fixed_Date=as.Date(Fixed_Date))%>%
filter(!is.na(X))
View(data7)
runApp()
shiny::runApp()
